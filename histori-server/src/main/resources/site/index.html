<!DOCTYPE html>
<html>
<head>
    <title>histori</title>
    <meta name="viewport" content="initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="css/histori.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css"/>
    <link rel="stylesheet" type="text/css" href="css/autocomplete.css"/>
    <link rel="stylesheet" type="text/css" href="css/dhtmlxslider.css"/>

    <meta charset="utf-8">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #map {
            height: 100%;
        }
    </style>
    <style>
        #sliderObj {
            width: 160px;
            height: 20px;
            margin-top: 2px;
        }
        #sliderOriginLabel, #sliderCurrentLabel {
            font-size: 18px;
            font-family: Tahoma,sans-serif;
            color: #ffffff;
            padding-left: 10px;
            padding-right: 10px;
        }
    </style>
    <script src='https://www.google.com/recaptcha/api.js'></script>
</head>
<body class="stop-scrolling">

<div id="map"></div>

<div id="mapImageContainer">
    <div class="mapImageControl">
        <button class="mapImageButton" onclick="closeMapImages(); return false;">close</button>
        <br/>
        <div class="mapImageControl">
            <button id="clockwise" class="bigbuttonicon">↻</button>
            <button id="anticlockwise" class="bigbuttonicon">↺</button>
        </div>
        <br/>

        <button id="btnMapImageMode" class="mapImageButton" onclick="toggleMapImageMode(); return false;">freeze image</button>

    </div>
    <div class="container"><img id="mapImg" class="mapImage"/></div>
</div>

<div id="nexusDetailsContainer">
    <div id="nexusTitleContainer">
        <span id="nexusNameContainer"></span>
        <span id="nexusDetailsControl">
            <button id="btn_nexusSave" class="nexusSaveButton" style="visibility: hidden" onclick="commitNexusEdits(); return false;">save</button>
            <button id="btn_nexusVersions" class="nexusButton" onclick="viewNexusVersions(); return false;">versions</button>
        </span>
    </div>
    <div id="nexusRangeContainer">
        <span class="nexusRangeStart" onclick="edit_nexus_field('nexusRangeStart');"></span>
        <span class="nexusRangeHyphen"></span>
        <span class="nexusRangeEnd" onclick="edit_nexus_field('nexusRangeEnd');"></span></div>
    <div id="nexusAuthorContainer"></div>
    <div id="nexusTagsContainer"></div>
    <div id="nexusCommentaryContainer"></div>
    <div id="nexusNearbyContainer"></div>
    <div id="nexusVersionsContainer"></div>
</div>

<div id="sliderContainer" style="visibility: hidden">
<table id="sliderTable" cellspacing="0" cellpadding="0" border="0">
    <tr>
        <td id="sliderPre">
            <button class="mode_button" id="btnInspect" style="font-weight: bold" value="inspect" onclick="setMode('inspect', this)">inspect</button>
        </td>
        <td id="sliderCell" colspan="3">
            <div id="sliderObj"></div>
        </td>
        <td id="sliderPost"></td>
    </tr>
    <tr>
      <td>
          <button class="mode_button" id="btnImageRegion" value="imageRegion" onclick="setMode('imageRegion', this);">overlay image</button>
          <button class="mode_button" id="btnAddRegion" value="addRegion" onclick="setMode('addRegion', this);">add region</button>
      </td>
      <td align="left">
        <span id="sliderOriginLabel"></span>
      </td>
      <td>&nbsp;&nbsp;&nbsp;</td>
      <td align="right">
        <span id="sliderCurrentLabel"></span>
      </td>
      <td></td>
    </tr>
    <tr>
        <td>
            <button class="mode_button" id="btnAddEvent" value="addEvent" onclick="setMode('addEvent', this);">add event</button>
        </td>
        <td valign="middle" align="center" colspan="3">
          <button id="btnZoomOut" disabled="true" onclick="timelineZoomOut();">&lt;&lt;&lt;zoom</button>
          <button id="btnZoomIn" onclick="timelineZoomIn();">zoom&gt;&gt;&gt;</button>
        </td>
        <td></td>
    </tr>
</table>

<span id="sliderOrigin" style="visibility: hidden"></span>
<span id="sliderCurrent" style="visibility: hidden"></span>
</div>

<div id="mainControlPanel">
    <table border="0" cellpadding="3">
        <thead>
          <tr>
              <td>&nbsp;<img class="mainControlButton" src="iconic/png/magnifying-glass-2x.png" onclick="showSearchOptions()"/></td>
              <td>&nbsp;<img class="mainControlButton" src="iconic/png/plus-2x.png"/></td>
              <td>&nbsp;<img class="mainControlButton" src="iconic/png/person-2x.png" onclick="showLoginForm()"/></td>
              <td>&nbsp;<img class="mainControlButton" src="iconic/png/question-mark-2x.png"/>&nbsp;</td>
          </tr>
        </thead>
    </table>
</div>

<div id="loginContainer" class="authContainer">
    <div class="authError"></div>
    <div id="loginForm">
        <form name="login" onsubmit="Histori.login(this.elements['email'].value, this.elements['password'].value, successfulLogin, handleAuthError('login')); return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>nickname/email:</td>
                    <td><input type="text" name="email"/></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" name="password"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="sign in"/>
                        <button onclick="closeLoginForm(); showRegForm(); return false; ">sign up</button>
                        <button onclick="closeLoginForm(); showForgotPassForm(); return false; ">forgot password</button>
                        <button onclick="closeLoginForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="forgotPassContainer" class="authContainer">
    <div class="authError"></div>
    <form name="forgot_password" onsubmit="Histori.forgot_password(this.elements['email'].value, successfulForgotPassword, handleAuthError('forgotPass')); return false;" method="post">
        <table border="0">
            <tbody>
            <tr>
                <td>email:</td>
                <td><input type="text" name="email"/></td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" value="reset password"/>
                    <button onclick="closeForgotPassForm(); return false; ">close</button>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>

<div id="resetPassContainer" class="authContainer">
    <div class="authError"></div>
    <div id="resetPassForm">
        <form name="resetPass" onsubmit="Histori.reset_password(getParameterByName('key'), this.elements['password'].value, successfulPasswordReset, handleAuthError('resetPass')); return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>new password:</td>
                    <td><input type="password" name="password"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="set new password"/>
                        <button onclick="closeResetPassForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="regContainer" class="authContainer">
    <div class="authError"></div>
    <div id="regForm">
        <form name="reg" onsubmit="Histori.register(this.elements['name'].value, this.elements['email'].value, this.elements['password'].value, successfulRegistration, handleAuthError('reg')); return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>nickname:</td>
                    <td><input type="text" name="name"/></td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="text" name="email"/></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" name="password"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="g-recaptcha" data-sitekey="6LeWURcTAAAAAPfQtEuykB8YJEhC0kEE63AjmJV7"></div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="sign up"/>
                        <button onclick="closeRegForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="accountContainer" class="authContainer">
    <div id="accountForm">
        <div class="authError"></div>
        <form name="account" onsubmit="clearAccountFormErrors(); if (validateAccountForm(this)) { Histori.update_account(this.elements['name'].value, this.elements['email'].value, this.elements['currentPassword'].value, this.elements['newPassword'].value, successfulAccountUpdate, handleAuthError('account')); } return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>nickname:</td>
                    <td><input type="text" name="name"/></td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="text" name="email"/></td>
                </tr>
                <tr>
                    <td>current password:</td>
                    <td><input type="password" name="currentPassword"/></td>
                </tr>
                <tr>
                    <td>new password:</td>
                    <td><input type="password" name="newPassword"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="update"/>
                        <button onclick="Histori.logout(); closeAccountForm(); return false; ">sign out</button>
                        <button onclick="closeAccountForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="searchOptionsContainer">
    <form name="search" onsubmit="return false;">
        <table border="0" width="100%">
            <thead>
            <tr>
                <td colspan="3" align="center">use "quotes" to enclose tags that contain spaces</td>
            </tr>
            </thead>
            <tbody id="searchBoxesTableBody">
            </tbody>
            <tfoot>
            <tr>
                <td align="center">
                    <button id="btn_addSearchRow" onclick="addSearchRow(true); return false; ">more</button>
                </td>
                <td></td>
                <td align="center">
                    <button onclick="closeSearchOptions(); return false; ">close</button>
                </td>
            </tr>
            </tfoot>
        </table>
    </form>
</div>

<div id="markerColorPickerContainer">
    <input id="colorPickerRowId" type="hidden" name="rowId"/>
</div>

<div>
    <input type="file" id="fileImageUpload"/>
</div>

</body>

<script src="js/jquery.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/dhtmlxcommon.js"></script>
<script src="js/dhtmlxslider.js"></script>
<script src="js/image_resizer.js"></script>
<script src="js/showdown.js"></script>
<script src="js/histori/api.js"></script>
<script src="js/histori/histori.js"></script>
<script src="js/histori/auth.js"></script>
<script src="js/histori/map_images.js"></script>
<script src="js/histori/time_slider.js"></script>
<script src="js/histori/edit_nexus.js"></script>
<script src="js/histori/search.js"></script>
<script src="js/histori/main.js"></script>
<script src="js/warp.js"></script>
<script type="text/javascript" src="js/jquery.autocomplete.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkjxB2DrMIXcFqK40XjlolSjnMCMF-cAk&callback=init"></script>
</html>
