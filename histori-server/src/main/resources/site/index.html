<!DOCTYPE html>
<html>
<head>
    <title>histori</title>
    <meta name="viewport" content="initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css"/>
    <link rel="stylesheet" type="text/css" href="css/autocomplete.css"/>
    <link rel="stylesheet" type="text/css" href="css/histori.css"/>

    <meta charset="utf-8">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        a:link a:visited {
            text-decoration: none;
            color: black;
        }

        a:hover a:active {
            text-decoration: underline;
            color: black;
        }
        #map {
            height: 100%;
        }
    </style>
    <script src='https://www.google.com/recaptcha/api.js'></script>
</head>
<body class="stop-scrolling">

<div id="map"></div>

<div id="mapImageContainer">
    <div class="mapImageControl">
        <button class="mapImageButton" onclick="closeMapImages(); return false;">close</button>
        <br/>
        <div class="mapImageControl">
            <button id="clockwise" class="bigbuttonicon">↻</button>
            <button id="anticlockwise" class="bigbuttonicon">↺</button>
        </div>
        <br/>

        <button id="btnMapImageMode" class="mapImageButton" onclick="toggleMapImageMode(); return false;">freeze image</button>

    </div>
    <div class="container"><img id="mapImg" class="mapImage"/></div>
</div>

<div id="nexusDetailsContainer">
    <div id="nexusTitleContainer">
        <span id="nexusNameContainer"></span>
        <span id="nexusDetailsControl">
            <button id="btn_nexusSave" class="nexusSaveButton" style="visibility: hidden" onclick="commitNexusEdits(); return false;">save</button>
            <button id="btn_nexusVersions" class="nexusButton" onclick="viewNexusVersions(); return false;">versions</button>
        </span>
    </div>
    <div id="nexusRangeContainer">
        <span class="nexusRangeStart" onclick="edit_nexus_field('nexusRangeStart');"></span>
        <span class="nexusRangeHyphen"></span>
        <span class="nexusRangeEnd" onclick="edit_nexus_field('nexusRangeEnd');"></span></div>
    <div id="nexusAuthorContainer"></div>
    <div id="nexusTagsContainer"></div>
    <div id="nexusCommentaryContainer"></div>
    <div id="nexusNearbyContainer"></div>
    <div id="nexusVersionsContainer"></div>
</div>

<div id="sliderContainer">
<table id="sliderTable" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr><td colspan="5">&nbsp;</td></tr>
    <tr>
        <td align="right" nowrap width="140"> <span class="sliderLabel" id="sliderStartLabel" title="click to change"></span> </td>
        <td>&nbsp;&nbsp;&nbsp;</td>
        <td id="sliderCell" align="center" width="100%"> <div id="timeSlider"></div> </td>
        <td>&nbsp;&nbsp;&nbsp;</td>
        <td align="left" nowrap width="140"> <span class="sliderLabel" id="sliderEndLabel" title="click to change"></span> </td>
    </tr>
    <tr>
        <td valign="middle" align="center" colspan="5">
            <button id="btnZoomOut" disabled="true" onclick="slider.zoom_out();">&lt;&lt;&lt;zoom</button>
            <button id="btnSetTimeRange" onclick="slider.edit_fields();">set time range</button>
            <button id="btnZoomIn" onclick="slider.zoom_in();">zoom&gt;&gt;&gt;</button>
        </td>
    </tr>
</table>
</div>

<div id="mainControlPanel">
    <table border="0" cellpadding="3">
        <thead>
          <tr>
              <td><img class="mainControlButton" title="search" src="iconic/png/magnifying-glass-2x.png" onclick="showSearchOptions()"/></td>
              <td>&nbsp;<img class="mainControlButton" title="Coming Soon! Support for user-contributed updates!" src="iconic/png/plus-2x.png"/></td>
              <td>&nbsp;<img id="btnAccount" class="mainControlButton" title="sign in / sign up" src="iconic/png/person-2x.png" onclick="showLoginForm()"/></td>
              <td>&nbsp;<img class="mainControlButton" title="Coming Soon! Help and info about histori.city" src="iconic/png/question-mark-2x.png"/></td>
          </tr>
        </thead>
    </table>
</div>

<div id="loginContainer" class="authContainer">
    <div class="authError"></div>
    <div id="loginForm">
        <form name="login" onsubmit="Histori.login(this.elements['email'].value, this.elements['password'].value, successfulLogin, handleAuthError('login')); return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>nickname/email:</td>
                    <td><input type="text" name="email"/></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" name="password"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="sign in"/>
                        <button onclick="closeLoginForm(); showRegForm(); return false; ">sign up</button>
                        <button onclick="closeLoginForm(); showForgotPassForm(); return false; ">forgot password</button>
                        <button onclick="closeLoginForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="forgotPassContainer" class="authContainer">
    <div class="authError"></div>
    <form name="forgot_password" onsubmit="Histori.forgot_password(this.elements['email'].value, successfulForgotPassword, handleAuthError('forgotPass')); return false;" method="post">
        <table border="0">
            <tbody>
            <tr>
                <td>email:</td>
                <td><input type="text" name="email"/></td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" value="reset password"/>
                    <button onclick="closeForgotPassForm(); return false; ">close</button>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>

<div id="resetPassContainer" class="authContainer">
    <div class="authError"></div>
    <div id="resetPassForm">
        <form name="resetPass" onsubmit="Histori.reset_password(getParameterByName('key'), this.elements['password'].value, successfulPasswordReset, handleAuthError('resetPass')); return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>new password:</td>
                    <td><input type="password" name="password"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="set new password"/>
                        <button onclick="closeResetPassForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="regContainer" class="authContainer">
    <div class="authError"></div>
    <div id="regForm">
        <form name="reg" onsubmit="Histori.register(this.elements, successfulRegistration, handleAuthError('reg')); return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>nickname:</td>
                    <td><input type="text" name="name"/></td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="text" name="email"/></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" name="password"/></td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td colspan="2">
                        <span style="font-size: x-small">
                            <input type="checkbox" name="subscribe"/> Email me when there's new stuff on histori.city
                        </span><br/>
                        <span style="font-size: xx-small">this is a low-volume email list, and your email will never be given to anyone else</span>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <!-- @@@recaptcha@@@ is replaced on the server-side at request-time -->
                    <td colspan="2" id="recaptchaContainer"><div class="g-recaptcha" data-sitekey="@@@recaptcha@@@"></div></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="sign up"/>
                        <button onclick="closeRegForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="accountContainer" class="authContainer">
    <div id="accountForm">
        <div class="authError"></div>
        <form name="account" onsubmit="clearAccountFormErrors(); if (validateAccountForm(this)) { Histori.update_account(this.elements, successfulAccountUpdate, handleAuthError('account')); } return false;" method="post">
            <table border="0">
                <tbody>
                <tr>
                    <td>nickname:</td>
                    <td><input type="text" name="name"/></td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="text" name="email"/></td>
                </tr>
                <tr>
                    <td>current password:</td>
                    <td><input type="password" name="currentPassword"/></td>
                </tr>
                <tr>
                    <td>new password:</td>
                    <td><input type="password" name="newPassword"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <span style="font-size: x-small">
                            <input type="checkbox" name="subscribe"/> Email me when there's new stuff on histori.city
                        </span><br/>
                        <span style="font-size: xx-small">this is a low-volume email list, and your email will never be given to anyone else</span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="submit" value="update"/>
                        <button onclick="Histori.logout(); closeAccountForm(); return false; ">sign out</button>
                        <button onclick="closeAccountForm(); return false; ">close</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<div id="searchOptionsContainer">
    <form name="search" onsubmit="return false;">
        <table border="0" width="100%">
            <thead>
            <tr>
                <td colspan="3" align="center">use "quotes" to enclose tags that contain spaces</td>
            </tr>
            </thead>
            <tbody id="searchBoxesTableBody">
            </tbody>
            <tfoot>
            <tr>
                <td align="center">
                    <button id="btn_addSearchRow" onclick="addSearchRow(true); return false; ">more</button>
                </td>
                <td></td>
                <td align="center">
                    <button onclick="closeSearchOptions(); return false; ">close</button>
                </td>
            </tr>
            </tfoot>
        </table>
    </form>
</div>

<div id="markerColorPickerContainer">
    <input id="colorPickerRowId" type="hidden" name="rowId"/>
</div>

<div>
    <input type="file" id="fileImageUpload"/>
</div>

</body>

<script src="js/jquery.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/image_resizer.js"></script>
<script src="js/showdown.js"></script>
<script src="js/histori/api.js"></script>
<script src="js/histori/histori.js"></script>
<script src="js/histori/auth.js"></script>
<script src="js/histori/map_images.js"></script>
<script src="js/histori/time_slider.js"></script>
<script src="js/histori/edit_nexus.js"></script>
<script src="js/histori/search.js"></script>
<script src="js/histori/main.js"></script>
<script type="text/javascript" src="js/jquery.autocomplete.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkjxB2DrMIXcFqK40XjlolSjnMCMF-cAk&callback=init"></script>
</html>
